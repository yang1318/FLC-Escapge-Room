<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>insite 스마트 퍼즐 챌린지</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="app">
      <!-- Intro with animated doors -->
      <section id="intro-section" class="page active">
        <div class="doors">
          <div class="door left"><span class="handle"></span></div>
          <div class="door right"><span class="handle"></span></div>
        </div>
        <h1 class="intro-title">insite SMART PUZZLE QUEST</h1>
        <p class="intro-subtitle">문을 열고 하루를 시작하세요</p>
        <button id="start-btn" class="primary-btn">출근하기</button>
        <p class="credit">insite 시스템 체험</p>
      </section>

      <!-- AI guide introduction -->
      <section id="guide-section" class="page">
        <div class="content">
          <h2 class="section-title">가이드 소개 – insite AI 매니저</h2>
          <div class="character-container">
            <img src="ai_avatar.png" alt="insite AI" class="character-img" />
            <div class="character-info">
              <div class="tags">
                <span class="tag tag-green">역할: 스마트 빌딩 매니저</span>
                <span class="tag tag-orange">난이도: 어려움</span>
                <span class="tag tag-blue">성격: 분석적</span>
              </div>
              <div class="quote-box">
                <p class="quote">
                  <span class="quote-mark">"</span>안녕하세요! 저는 insite AI 매니저입니다.<span
                    class="quote-mark"
                    >"</span
                  >
                </p>
                <p class="quote-body">
                  하루 동안 발생하는 다양한 상황을 미리 예측하고 대응하는 것이 제
                  역할입니다. insite가 이미 분석한 정보를 토대로 퍼즐을 풀어 보세요.
                </p>
              </div>
              <div class="rules-box">
                <h3 class="rules-title">게임 규칙</h3>
                <ul class="rules-list">
                  <li>총 여섯 가지 스테이지를 순서대로 진행합니다.</li>
                  <li>각 스테이지는 정보 매칭, 순서 맞추기, 미니게임 등으로 구성되어 있습니다.</li>
                  <li>insite가 제시하는 데이터를 잘 활용해 올바른 선택을 해보세요.</li>
                  <li>모든 스테이지를 통과하면 하루 업무를 완벽하게 마무리할 수 있습니다.</li>
                </ul>
              </div>
              <button id="to-stage1" class="primary-btn">업무 시작</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Stage 1: Predictive maintenance graph matching -->
      <section id="stage1-section" class="page">
        <div class="content">
          <h2 class="section-title">Stage 1. 출근길 – 예지보전 퍼즐</h2>
          <div class="mission-row">
            <div class="mission-col description-col">
              <div class="mission-desc-box">
                <h3>상황</h3>
                <p>
                  펌프 진동 알람이 <strong>47Hz</strong>로 측정되었습니다 (임계치
                  50Hz). insite가 <em>긴급 점검</em>을 권고합니다. 올바른 그래프를
                  선택해야 예약 버튼이 활성화됩니다.
                </p>
              </div>
              <div class="mission-desc-box hints">
                <h3>힌트</h3>
                <ul>
                  <li>insite는 이미 데이터를 분석하여 그래프를 제시합니다.</li>
                  <li>세 가지 그래프 중 현재 상황과 일치하는 하나를 고르세요.</li>
                  <li>진동이 임계치에 근접한 경계 상태입니다.</li>
                </ul>
              </div>
            </div>
            <div class="mission-col interactive-col">
              <div class="graph-options">
                <div class="graph-option" data-answer="normal">
                  <img src="graph_normal.png" alt="그래프 1" />
                </div>
                <div class="graph-option" data-answer="borderline">
                  <img src="graph_borderline.png" alt="그래프 2" />
                </div>
                <div class="graph-option" data-answer="danger">
                  <img src="graph_danger.png" alt="그래프 3" />
                </div>
              </div>
              <button id="stage1-confirm" class="primary-btn" disabled>예약하기</button>
              <button id="stage1-next" class="primary-btn hidden">다음 단계</button>
            </div>
          </div>
          <div id="stage1-message" class="mission-message"></div>
        </div>
      </section>

      <!-- Stage 2: Energy optimisation jigsaw -->
      <section id="stage2-section" class="page">
        <div class="content">
          <h2 class="section-title">Stage 2. 오전 – 에너지 최적화 미니게임</h2>
          <div class="mission-row">
            <div class="mission-col description-col">
              <div class="mission-desc-box">
                <h3>상황</h3>
                <p>
                  insite가 오후 냉방 부하 증가를 예측했습니다. AI는 “<strong>13~15시</strong>
                  예비 냉방 시 최대 12% 절감”이라는 권고를 제공합니다. 그러나
                  퍼즐 조각이 섞여 있어서 그래프를 완성해야만 최적 시간대를
                  확인할 수 있습니다.
                </p>
              </div>
              <div class="mission-desc-box hints">
                <h3>힌트</h3>
                <ul>
                  <li>그래프 조각을 드래그하여 올바른 순서로 정렬하세요.</li>
                  <li>그래프가 완성되면 최적 냉방 시간대가 나타납니다.</li>
                </ul>
              </div>
            </div>
            <div class="mission-col interactive-col">
              <div id="energy-puzzle" class="energy-puzzle">
                <div class="energy-piece" data-index="1" draggable="true">
                  <img src="energy_piece1.png" alt="조각 1" />
                </div>
                <div class="energy-piece" data-index="2" draggable="true">
                  <img src="energy_piece2.png" alt="조각 2" />
                </div>
                <div class="energy-piece" data-index="3" draggable="true">
                  <img src="energy_piece3.png" alt="조각 3" />
                </div>
                <div class="energy-piece" data-index="4" draggable="true">
                  <img src="energy_piece4.png" alt="조각 4" />
                </div>
              </div>
              <button id="stage2-check" class="primary-btn">확인하기</button>
              <button id="stage2-next" class="primary-btn hidden">다음 단계</button>
            </div>
          </div>
          <div id="stage2-message" class="mission-message"></div>
        </div>
      </section>

      <!-- Stage 3: Meeting room complaint -->
      <section id="stage3-section" class="page">
        <div class="content">
          <h2 class="section-title">Stage 3. 점심 – 민원 자동 처리 & 빠른 선택</h2>
          <div class="mission-row">
            <div class="mission-col description-col">
              <div class="mission-desc-box">
                <h3>상황</h3>
                <p>
                  입주사에서 “회의실 조명이 깜빡인다”는 민원이 접수되었습니다.
                  insite는 즉시 2층 3번 회의실의 조명 고장으로 진단했습니다. 세
                  개의 회의실 사진을 살펴보고 <strong>깜빡이는 회의실</strong>을
                  찾아주세요.
                </p>
              </div>
              <div class="mission-desc-box hints">
                <h3>힌트</h3>
                <ul>
                  <li>제한 시간 10초 안에 선택해야 합니다.</li>
                  <li>약간 깜빡이는 회의실은 밝기 변화가 있습니다.</li>
                </ul>
              </div>
            </div>
            <div class="mission-col interactive-col">
              <div class="rooms" id="rooms"></div>
              <div class="timer-bar" id="stage3-timer"></div>
              <button id="stage3-next" class="primary-btn hidden">다음 단계</button>
            </div>
          </div>
          <div id="stage3-message" class="mission-message"></div>
        </div>
      </section>

      <!-- Stage 4: Maze navigation -->
      <section id="stage4-section" class="page">
        <div class="content">
          <h2 class="section-title">Stage 4. 오후 – AR 점검 경로 길찾기</h2>
          <div class="mission-row">
            <div class="mission-col description-col">
              <div class="mission-desc-box">
                <h3>상황</h3>
                <p>
                  공조기에서 이상 진동이 감지되었습니다. AR 디지털 트윈에서
                  <span class="highlight">B2 기계실 → 복도 → 펌프실 붉은 벨브</span>
                  순서로 이동하라는 안내가 나옵니다. 올바른 경로를 따라 밸브를
                  찾아 이동하세요.
                </p>
              </div>
              <div class="mission-desc-box hints">
                <h3>힌트</h3>
                <ul>
                  <li>미로에서 방향 키(↑ ↓ ← →) 버튼을 사용하여 이동합니다.</li>
                  <li>정해진 순서가 있습니다. 잘못 이동하면 시간 −5초 패널티가
                  적용됩니다.</li>
                  <li>제한 시간 40초 안에 목표 지점에 도달하세요.</li>
                </ul>
              </div>
            </div>
            <div class="mission-col interactive-col">
              <div class="maze-container" id="maze-container">
                <img src="maze.png" alt="미로" class="maze-img" />
                <div class="player" id="maze-player"></div>
              </div>
              <div class="maze-controls">
                <button class="arrow-btn" data-dir="up">↑</button>
                <button class="arrow-btn" data-dir="left">←</button>
                <button class="arrow-btn" data-dir="down">↓</button>
                <button class="arrow-btn" data-dir="right">→</button>
              </div>
              <div class="timer-bar" id="stage4-timer"></div>
              <button id="stage4-next" class="primary-btn hidden">다음 단계</button>
            </div>
          </div>
          <div id="stage4-message" class="mission-message"></div>
        </div>
      </section>

      <!-- Stage 5: Fire response quick reaction -->
      <section id="stage5-section" class="page">
        <div class="content">
          <h2 class="section-title">Stage 5. 저녁 – 화재 대응 퀴즈</h2>
          <div class="mission-row">
            <div class="mission-col description-col">
              <div class="mission-desc-box">
                <h3>상황</h3>
                <p>
                  5층에서 화재가 발생했습니다. insite는 아래 제어를 권고합니다.
                  제한 시간 10초 안에 세 개의 버튼을 올바른 순서대로 누르세요.
                </p>
              </div>
              <div class="mission-desc-box hints">
                <h3>권고 사항</h3>
                <ul>
                  <li>스프링클러 <strong>ON</strong></li>
                  <li>엘리베이터 <strong>STOP</strong></li>
                  <li>도어락 <strong>UNLOCK</strong></li>
                </ul>
              </div>
            </div>
            <div class="mission-col interactive-col">
              <div class="reaction-buttons" id="reaction-buttons"></div>
              <div class="timer-bar" id="stage5-timer"></div>
              <button id="stage5-next" class="primary-btn hidden">다음 단계</button>
            </div>
          </div>
          <div id="stage5-message" class="mission-message"></div>
        </div>
      </section>

      <!-- Stage 6: Final code puzzle -->
      <section id="stage6-section" class="page">
        <div class="content">
          <h2 class="section-title">Stage 6. 하루 마무리 – 자동 리포트 잠금 해제</h2>
          <div class="mission-row">
            <div class="mission-col description-col">
              <div class="mission-desc-box">
                <h3>상황</h3>
                <p>
                  insite가 하루의 업무를 정리한 자동 보고서를 생성했습니다. 그러나
                  보안 잠금이 걸려 있습니다. insite가 힌트를 남겼습니다:
                </p>
                <blockquote class="puzzle-hint">
                  오늘 민원 수 <strong id="report-complaints">-</strong> + 절감율
                  <strong id="report-saving">-</strong> + 이벤트 수
                  <strong id="report-events">-</strong> = 암호
                </blockquote>
                <p>위의 값을 합산하여 암호를 입력하면 보고서가 발송됩니다.</p>
              </div>
            </div>
            <div class="mission-col interactive-col">
              <div class="code-input">
                <input type="number" id="code-answer" placeholder="암호 입력" />
                <button id="stage6-check" class="primary-btn">해제하기</button>
              </div>
              <button id="stage6-next" class="primary-btn hidden">결과 보기</button>
            </div>
          </div>
          <div id="stage6-message" class="mission-message"></div>
        </div>
      </section>

      <!-- Results: show performance metrics -->
      <section id="results-section" class="page">
        <div class="content">
          <h2 class="section-title">결과 요약</h2>
          <div class="results-container">
            <div class="result-chart">
              <div class="progress-circle" id="efficiency-circle">
                <span>효율</span>
              </div>
              <div class="progress-circle" id="satisfaction-circle">
                <span>만족</span>
              </div>
              <div class="progress-circle" id="safety-circle">
                <span>안전</span>
              </div>
            </div>
            <div class="results-list" id="results-list"></div>
            <button id="to-summary" class="primary-btn">종합 결과</button>
          </div>
        </div>
      </section>

      <!-- Summary & Feedback -->
      <section id="summary-section" class="page">
        <div class="content">
          <h2 class="section-title">하루 업무 요약</h2>
          <div id="final-message" class="final-message"></div>
          <div class="feedback-container">
            <h3>만족도 평가</h3>
            <div class="stars" id="feedback-stars">
              <span class="star" data-value="1">★</span>
              <span class="star" data-value="2">★</span>
              <span class="star" data-value="3">★</span>
              <span class="star" data-value="4">★</span>
              <span class="star" data-value="5">★</span>
            </div>
            <button id="submit-feedback" class="secondary-btn">피드백 보내기</button>
          </div>
          <div class="summary-actions">
            <button id="restart-game" class="primary-btn">다시 도전</button>
            <button id="back-to-main" class="secondary-btn">처음으로</button>
          </div>
        </div>
      </section>
    </div>
    <script src="script.js"></script>
  </body>
</html>